document.addEventListener('DOMContentLoaded', function() {
  const form = document.getElementById('customScheduleForm');
  const scheduleContainer = document.getElementById('scheduleContainer');
  const saveParametersButton = document.createElement('button');
  const loadScheduleButton = document.createElement('button');

  saveParametersButton.textContent = '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ';
  loadScheduleButton.textContent = '–ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ';
  saveParametersButton.type = 'button';
  loadScheduleButton.type = 'button';

  form.appendChild(saveParametersButton);
  form.appendChild(loadScheduleButton);

  function updateTimeLabels() {
    const startLabel = document.getElementById('startTimeLabel');
    const endLabel = document.getElementById('endTimeLabel');
    const startTime = document.getElementById('timeStart').value;
    const endTime = document.getElementById('timeEnd').value;

    startLabel.textContent = minutesToTime(startTime);
    endLabel.textContent = minutesToTime(endTime);
  }

  function minutesToTime(minutes) {
    const hours = Math.floor(minutes / 60);
    const mins = minutes % 60;
    return `${('0' + hours).slice(-2)}:${('0' + mins).slice(-2)}`;
  }

  function saveParameters() {
    const formData = new FormData(form);
    const parameters = {};

    formData.forEach((value, key) => {
      if (!parameters[key]) {
        parameters[key] = [];
      }
      parameters[key].push(value);
    });

    localStorage.setItem('raceScheduleParameters', JSON.stringify(parameters));

    if (scheduleContainer.innerHTML) {
      localStorage.setItem('lastRaceSchedule', scheduleContainer.innerHTML);
    }

    alert('–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ!');
  }

  function loadParameters() {
    const savedParameters = JSON.parse(localStorage.getItem('raceScheduleParameters'));
    if (savedParameters) {
      for (const key in savedParameters) {
        const checkboxes = document.querySelectorAll(input[name="${key}"]);
        checkboxes.forEach((checkbox) => {
          checkbox.checked = savedParameters[key].includes(checkbox.value);
        });
      }
    }
    alert('–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ!');
  }

  function createSchedule() {
    const selectedCountries = Array.from(document.querySelectorAll('input[name="country"]:checked')).map(input => input.value);
    const selectedSessionTypes = Array.from(document.querySelectorAll('input[name="sessionType"]:checked')).map(input => input.value);

    const startTime = parseInt(document.getElementById('timeStart').value, 10);
    const endTime = parseInt(document.getElementById('timeEnd').value, 10);

  const allSessions = [
    {
      country: 'bahrain',
      events: [
        { date: '29.02.2024 14:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ë–∞—Ö—Ä–µ–π–Ω–∞. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 1', type: 'practice' },
        { date: '29.02.2024 18:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ë–∞—Ö—Ä–µ–π–Ω–∞. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 2', type: 'practice' },
        { date: '01.03.2024 14:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ë–∞—Ö—Ä–µ–π–Ω–∞. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 3', type: 'practice' },
        { date: '01.03.2024 19:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ë–∞—Ö—Ä–µ–π–Ω–∞. –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'qualifying' },
        { date: '02.03.2024 18:00', title: 'üèÅ –ì—Ä–∞–Ω-–ø—Ä–∏ –ë–∞—Ö—Ä–µ–π–Ω–∞. –ì–æ–Ω–∫–∞ (57 –∫—Ä—É–≥–æ–≤, 308.238 –∫–º)', type: 'race' },
      ]
    },
    {
      country: 'saudi-arabia',
      events: [
        { date: '07.03.2024 16:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –°–∞—É–¥–æ–≤—Å–∫–æ–π –ê—Ä–∞–≤–∏–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 1', type: 'practice' },
        { date: '07.03.2024 20:10', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –°–∞—É–¥–æ–≤—Å–∫–æ–π –ê—Ä–∞–≤–∏–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 2', type: 'practice' },
        { date: '08.03.2024 16:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –°–∞—É–¥–æ–≤—Å–∫–æ–π –ê—Ä–∞–≤–∏–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 3', type: 'practice' },
        { date: '08.03.2024 20:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –°–∞—É–¥–æ–≤—Å–∫–æ–π –ê—Ä–∞–≤–∏–∏. –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'qualifying' },
        { date: '09.03.2024 20:00', title: 'üèÅ –ì—Ä–∞–Ω-–ø—Ä–∏ –°–∞—É–¥–æ–≤—Å–∫–æ–π –ê—Ä–∞–≤–∏–∏. –ì–æ–Ω–∫–∞ (50 –∫—Ä—É–≥–æ–≤, 308.450 –∫–º)', type: 'race' },
      ]
    },
    {
      country: 'australia',
      events: [
        { date: '22.03.2024 04:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ê–≤—Å—Ç—Ä–∞–ª–∏–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 1', type: 'practice' },
        { date: '22.03.2024 08:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ê–≤—Å—Ç—Ä–∞–ª–∏–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 2', type: 'practice' },
        { date: '23.03.2024 04:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ê–≤—Å—Ç—Ä–∞–ª–∏–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 3', type: 'practice' },
        { date: '23.03.2024 08:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ê–≤—Å—Ç—Ä–∞–ª–∏–∏. –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'qualifying' },
        { date: '24.03.2024 08:30', title: 'üèÅ –ì—Ä–∞–Ω-–ø—Ä–∏ –ê–≤—Å—Ç—Ä–∞–ª–∏–∏. –ì–æ–Ω–∫–∞ (58 –∫—Ä—É–≥–æ–≤, 306.124 –∫–º)', type: 'race' },
      ]
    },
    {
      country: 'japan',
      events: [
        { date: '05.04.2024 05:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –Ø–ø–æ–Ω–∏–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 1', type: 'practice' },
        { date: '05.04.2024 09:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –Ø–ø–æ–Ω–∏–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 2', type: 'practice' },
        { date: '06.04.2024 05:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –Ø–ø–æ–Ω–∏–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 3', type: 'practice' },
        { date: '06.04.2024 09:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –Ø–ø–æ–Ω–∏–∏. –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'qualifying' },
        { date: '07.04.2024 08:00', title: 'üèÅ –ì—Ä–∞–Ω-–ø—Ä–∏ –Ø–ø–æ–Ω–∏–∏. –ì–æ–Ω–∫–∞ (53 –∫—Ä—É–≥–∞, 307.471 –∫–º)', type: 'race' },
      ]
    },
    {
      country: 'china',
      events: [
        { date: '19.04.2024 06:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ö–∏—Ç–∞—è. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 1', type: 'practice' },
        { date: '19.04.2024 10:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ö–∏—Ç–∞—è. –°–ø—Ä–∏–Ω—Ç-–∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'sprint-qualifying' },
        { date: '20.04.2024 06:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ö–∏—Ç–∞—è. –°–ø—Ä–∏–Ω—Ç', type: 'sprint' },
        { date: '20.04.2024 10:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ö–∏—Ç–∞—è. –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'qualifying' },
        { date: '21.04.2024 10:00', title: 'üèÅ –ì—Ä–∞–Ω-–ø—Ä–∏ –ö–∏—Ç–∞—è. –ì–æ–Ω–∫–∞ (56 –∫—Ä—É–≥–æ–≤, 305.066 –∫–º)', type: 'race' },
      ]
    },
    {
      country: 'usa',
      events: [
        { date: '03.05.2024 19:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ú–∞–π–∞–º–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 1', type: 'practice' },
        { date: '03.05.2024 23:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ú–∞–π–∞–º–∏. –°–ø—Ä–∏–Ω—Ç-–∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'sprint-qualifying' },
        { date: '04.05.2024 19:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ú–∞–π–∞–º–∏. –°–ø—Ä–∏–Ω—Ç', type: 'sprint' },
        { date: '04.05.2024 23:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ú–∞–π–∞–º–∏. –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'qualifying' },
        { date: '05.05.2024 20:30', title: 'üèÅ –ì—Ä–∞–Ω-–ø—Ä–∏ –ú–∞–π–∞–º–∏. –ì–æ–Ω–∫–∞ (57 –∫—Ä—É–≥–æ–≤, 308.326 –∫–º)', type: 'race' },
      ]
    },
    {
      country: 'italy',
      events: [
        { date: '17.05.2024 14:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –≠–º–∏–ª–∏–∏-–†–æ–º–∞–Ω—å–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 1', type: 'practice' },
        { date: '17.05.2024 18:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –≠–º–∏–ª–∏–∏-–†–æ–º–∞–Ω—å–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 2', type: 'practice' },
        { date: '18.05.2024 14:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –≠–º–∏–ª–∏–∏-–†–æ–º–∞–Ω—å–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 3', type: 'practice' },
        { date: '18.05.2024 18:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –≠–º–∏–ª–∏–∏-–†–æ–º–∞–Ω—å–∏. –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'qualifying' },
        { date: '19.05.2024 16:00', title: 'üèÅ –ì—Ä–∞–Ω-–ø—Ä–∏ –≠–º–∏–ª–∏–∏-–†–æ–º–∞–Ω—å–∏. –ì–æ–Ω–∫–∞ (63 –∫—Ä—É–≥–∞, 309.049 –∫–º)', type: 'race' },
      ]
    },
    {
      country: 'monaco',
      events: [
        { date: '24.05.2024 14:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ú–æ–Ω–∞–∫–æ. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 1', type: 'practice' },
        { date: '24.05.2024 18:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ú–æ–Ω–∞–∫–æ. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 2', type: 'practice' },
        { date: '25.05.2024 13:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ú–æ–Ω–∞–∫–æ. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 3', type: 'practice' },
        { date: '26.05.2024 16:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ú–æ–Ω–∞–∫–æ. –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'qualifying' },
        { date: '26.05.2024 16:00', title: 'üèÅ –ì—Ä–∞–Ω-–ø—Ä–∏ –ú–æ–Ω–∞–∫–æ. –ì–æ–Ω–∫–∞ (78 –∫—Ä—É–≥–æ–≤, 260.286 –∫–º)', type: 'race' },
      ]
    },
    {
      country: 'canada',
      events: [
        { date: '07.06.2024 20:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ö–∞–Ω–∞–¥—ã. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 1', type: 'practice' },
        { date: '07.06.2024 00:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ö–∞–Ω–∞–¥—ã. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 2', type: 'practice' },
        { date: '08.06.2024 20:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ö–∞–Ω–∞–¥—ã. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 3', type: 'practice' },
        { date: '09.06.2024 00:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ö–∞–Ω–∞–¥—ã. –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'qualifying' },
        { date: '09.06.2024 21:00', title: 'üèÅ –ì—Ä–∞–Ω-–ø—Ä–∏ –ö–∞–Ω–∞–¥—ã. –ì–æ–Ω–∫–∞ (70 –∫—Ä—É–≥–æ–≤, 305.270 –∫–º)', type: 'race' },
      ]
    },
    {
      country: 'spain',
      events: [
        { date: '21.06.2024 14:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ò—Å–ø–∞–Ω–∏–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 1', type: 'practice' },
        { date: '21.06.2024 18:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ò—Å–ø–∞–Ω–∏–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 2', type: 'practice' },
        { date: '22.06.2024 13:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ò—Å–ø–∞–Ω–∏–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 3', type: 'practice' },
        { date: '22.06.2024 16:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ò—Å–ø–∞–Ω–∏–∏. –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'qualifying' },
        { date: '23.06.2024 16:00', title: 'üèÅ –ì—Ä–∞–Ω-–ø—Ä–∏ –ò—Å–ø–∞–Ω–∏–∏. –ì–æ–Ω–∫–∞ (66 –∫—Ä—É–≥–æ–≤, 307.236 –∫–º)', type: 'race' },
      ]
    },
    {
      country: 'austria',
      events: [
        { date: '28.06.2024 13:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ê–≤—Å—Ç—Ä–∏–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 1', type: 'practice' },
        { date: '28.06.2024 17:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ê–≤—Å—Ç—Ä–∏–∏. –°–ø—Ä–∏–Ω—Ç-–∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'sprint-qualifying' },
        { date: '29.06.2024 13:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ê–≤—Å—Ç—Ä–∏–∏. –°–ø—Ä–∏–Ω—Ç', type: 'sprint' },
        { date: '30.06.2024 14:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ê–≤—Å—Ç—Ä–∏–∏. –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'qualifying' },
        { date: '30.06.2024 16:00', title: 'üèÅ –ì—Ä–∞–Ω-–ø—Ä–∏ –ê–≤—Å—Ç—Ä–∏–∏. –ì–æ–Ω–∫–∞ (71 –∫—Ä—É–≥, 306.452 –∫–º)', type: 'race' },
      ]
    },
    {
      country: 'uk',
      events: [
        { date: '05.07.2024 14:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 1', type: 'practice' },
        { date: '05.07.2024 18:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 2', type: 'practice' },
        { date: '06.07.2024 13:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 3', type: 'practice' },
        { date: '06.07.2024 17:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏–∏. –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'qualifying' },
        { date: '07.07.2024 14:30', title: 'üèÅ –ì—Ä–∞–Ω-–ø—Ä–∏ –í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏–∏. –ì–æ–Ω–∫–∞ (52 –∫—Ä—É–≥–∞, 306.198 –∫–º)', type: 'race' },
      ]
    },
    {
      country: 'hungary',
      events: [
        { date: '19.07.2024 14:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –í–µ–Ω–≥—Ä–∏–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 1', type: 'practice' },
        { date: '19.07.2024 18:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –í–µ–Ω–≥—Ä–∏–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 2', type: 'practice' },
        { date: '20.07.2024 14:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –í–µ–Ω–≥—Ä–∏–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 3', type: 'practice' },
        { date: '20.07.2024 17:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –í–µ–Ω–≥—Ä–∏–∏. –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'qualifying' },
        { date: '21.07.2024 16:00', title: 'üèÅ –ì—Ä–∞–Ω-–ø—Ä–∏ –í–µ–Ω–≥—Ä–∏–∏. –ì–æ–Ω–∫–∞ (70 –∫—Ä—É–≥–æ–≤, 306.630 –∫–º)', type: 'race' },
      ]
    },
    {
      country: 'belgium',
      events: [
        { date: '26.07.2024 14:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ë–µ–ª—å–≥–∏–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 1', type: 'practice' },
        { date: '26.07.2024 18:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ë–µ–ª—å–≥–∏–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 2', type: 'practice' },
        { date: '27.07.2024 14:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ë–µ–ª—å–≥–∏–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 3', type: 'practice' },
        { date: '27.07.2024 17:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ë–µ–ª—å–≥–∏–∏. –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'qualifying' },
        { date: '28.07.2024 16:00', title: 'üèÅ –ì—Ä–∞–Ω-–ø—Ä–∏ –ë–µ–ª—å–≥–∏–∏. –ì–æ–Ω–∫–∞ (44 –∫—Ä—É–≥–∞, 308.052 –∫–º)', type: 'race' },
      ]
    },
    {
      country: 'netherlands',
      events: [
        { date: '23.08.2024 14:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ù–∏–¥–µ—Ä–ª–∞–Ω–¥–æ–≤. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 1', type: 'practice' },
        { date: '23.08.2024 18:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ù–∏–¥–µ—Ä–ª–∞–Ω–¥–æ–≤. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 2', type: 'practice' },
        { date: '24.08.2024 13:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ù–∏–¥–µ—Ä–ª–∞–Ω–¥–æ–≤. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 3', type: 'practice' },
        { date: '24.08.2024 17:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ù–∏–¥–µ—Ä–ª–∞–Ω–¥–æ–≤. –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'qualifying' },
        { date: '25.08.2024 16:00', title: 'üèÅ –ì—Ä–∞–Ω-–ø—Ä–∏ –ù–∏–¥–µ—Ä–ª–∞–Ω–¥–æ–≤. –ì–æ–Ω–∫–∞ (72 –∫—Ä—É–≥–∞, 306.587 –∫–º)', type: 'race' },
      ]
    },
    {
      country: 'italy-monza',
      events: [
        { date: '30.08.2024 14:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ò—Ç–∞–ª–∏–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 1', type: 'practice' },
        { date: '30.08.2024 18:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ò—Ç–∞–ª–∏–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 2', type: 'practice' },
        { date: '31.08.2024 13:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ò—Ç–∞–ª–∏–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 3', type: 'practice' },
        { date: '31.08.2024 17:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ò—Ç–∞–ª–∏–∏. –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'qualifying' },
        { date: '01.09.2024 16:00', title: 'üèÅ –ì—Ä–∞–Ω-–ø—Ä–∏ –ò—Ç–∞–ª–∏–∏. –ì–æ–Ω–∫–∞ (53 –∫—Ä—É–≥–∞, 306.720 –∫–º)', type: 'race' },
      ]
    },
    {
      country: 'azerbaijan',
      events: [
        { date: '13.09.2024 14:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω–∞. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 1', type: 'practice' },
        { date: '13.09.2024 18:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω–∞. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 2', type: 'practice' },
        { date: '14.09.2024 12:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω–∞. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 3', type: 'practice' },
        { date: '14.09.2024 16:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω–∞. –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'qualifying' },
        { date: '15.09.2024 16:00', title: 'üèÅ –ì—Ä–∞–Ω-–ø—Ä–∏ –ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω–∞. –ì–æ–Ω–∫–∞ (51 –∫—Ä—É–≥, 306.049 –∫–º)', type: 'race' },
      ]
    },
    {
      country: 'singapore',
      events: [
        { date: '20.09.2024 12:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –°–∏–Ω–≥–∞–ø—É—Ä–∞. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 1', type: 'practice' },
        { date: '20.09.2024 16:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –°–∏–Ω–≥–∞–ø—É—Ä–∞. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 2', type: 'practice' },
        { date: '21.09.2024 12:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –°–∏–Ω–≥–∞–ø—É—Ä–∞. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 3', type: 'practice' },
        { date: '21.09.2024 16:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –°–∏–Ω–≥–∞–ø—É—Ä–∞. –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'qualifying' },
        { date: '22.09.2024 16:00', title: 'üèÅ –ì—Ä–∞–Ω-–ø—Ä–∏ –°–∏–Ω–≥–∞–ø—É—Ä–∞. –ì–æ–Ω–∫–∞ (62 –∫—Ä—É–≥–∞, 306.143 –∫–º)', type: 'race' },
      ]
    },
    {
      country: 'usa-austin',
      events: [
        { date: '18.10.2024 12:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –°–®–ê. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 1', type: 'practice' },
        { date: '19.10.2024 20:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –°–®–ê. –°–ø—Ä–∏–Ω—Ç-–∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'sprint-qualifying' },
        { date: '19.10.2024 21:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –°–®–ê. –°–ø—Ä–∏–Ω—Ç', type: 'sprint' },
        { date: '20.10.2024 00:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –°–®–ê. –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'qualifying' },
        { date: '20.10.2024 22:00', title: 'üèÅ –ì—Ä–∞–Ω-–ø—Ä–∏ –°–®–ê. –ì–æ–Ω–∫–∞ (56 –∫—Ä—É–≥–æ–≤, 308.405 –∫–º)', type: 'race' },
      ]
    },
    {
      country: 'mexico',
      events: [
        { date: '25.10.2024 21:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ú–µ–∫—Å–∏–∫–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 1', type: 'practice' },
        { date: '26.10.2024 21:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ú–µ–∫—Å–∏–∫–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 2', type: 'practice' },
        { date: '26.10.2024 21:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ú–µ–∫—Å–∏–∫–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 3', type: 'practice' },
        { date: '27.10.2024 00:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ú–µ–∫—Å–∏–∫–∏. –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'qualifying' },
        { date: '27.10.2024 23:00', title: 'üèÅ –ì—Ä–∞–Ω-–ø—Ä–∏ –ú–µ–∫—Å–∏–∫–∏. –ì–æ–Ω–∫–∞ (71 –∫—Ä—É–≥, 305.354 –∫–º)', type: 'race' },
      ]
    },
    {
      country: 'brazil',
      events: [
        { date: '01.11.2024 17:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ë—Ä–∞–∑–∏–ª–∏–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 1', type: 'practice' },
        { date: '01.11.2024 21:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ë—Ä–∞–∑–∏–ª–∏–∏. –°–ø—Ä–∏–Ω—Ç-–∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'sprint-qualifying' },
        { date: '02.11.2024 17:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ë—Ä–∞–∑–∏–ª–∏–∏. –°–ø—Ä–∏–Ω—Ç', type: 'sprint' },
        { date: '02.11.2024 21:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ë—Ä–∞–∑–∏–ª–∏–∏. –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'qualifying' },
        { date: '03.11.2024 18:47', title: 'üèÅ –ì—Ä–∞–Ω-–ø—Ä–∏ –ë—Ä–∞–∑–∏–ª–∏–∏. –ì–æ–Ω–∫–∞ (71 –∫—Ä—É–≥, 305.879 –∫–º)', type: 'race' },
      ]
    },
    {
      country: 'usa-las-vegas',
      events: [
        { date: '22.11.2024 05:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –õ–∞—Å-–í–µ–≥–∞—Å–∞. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 1', type: 'practice' },
        { date: '22.11.2024 09:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –õ–∞—Å-–í–µ–≥–∞—Å–∞. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 2', type: 'practice' },
        { date: '23.11.2024 05:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –õ–∞—Å-–í–µ–≥–∞—Å–∞. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 3', type: 'practice' },
        { date: '23.11.2024 09:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –õ–∞—Å-–í–µ–≥–∞—Å–∞. –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'qualifying' },
        { date: '24.11.2024 09:00', title: 'üèÅ –ì—Ä–∞–Ω-–ø—Ä–∏ –õ–∞—Å-–í–µ–≥–∞—Å–∞. –ì–æ–Ω–∫–∞ (50 –∫—Ä—É–≥–æ–≤, 309.958 –∫–º)', type: 'race' },
      ]
    },
    {
      country: 'qatar',
      events: [
        { date: '29.11.2024 16:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ö–∞—Ç–∞—Ä–∞. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 1', type: 'practice' },
        { date: '29.11.2024 20:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ö–∞—Ç–∞—Ä–∞. –°–ø—Ä–∏–Ω—Ç-–∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'sprint-qualifying' },
        { date: '30.11.2024 17:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ö–∞—Ç–∞—Ä–∞. –°–ø—Ä–∏–Ω—Ç', type: 'sprint' },
        { date: '30.11.2024 21:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ö–∞—Ç–∞—Ä–∞. –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'qualifying' },
        { date: '01.12.2024 19:00', title: 'üèÅ –ì—Ä–∞–Ω-–ø—Ä–∏ –ö–∞—Ç–∞—Ä–∞. –ì–æ–Ω–∫–∞ (57 –∫—Ä—É–≥–æ–≤, 308.611 –∫–º)', type: 'race' },
      ]
    },
    {
      country: 'uae',
      events: [
        { date: '06.12.2024 12:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ê–±—É-–î–∞–±–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 1', type: 'practice' },
        { date: '06.12.2024 16:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ê–±—É-–î–∞–±–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 2', type: 'practice' },
        { date: '07.12.2024 13:30', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ê–±—É-–î–∞–±–∏. –°–≤–æ–±–æ–¥–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ 3', type: 'practice' },
        { date: '07.12.2024 17:00', title: '–ì—Ä–∞–Ω-–ø—Ä–∏ –ê–±—É-–î–∞–±–∏. –ö–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è', type: 'qualifying' },
        { date: '08.12.2024 17:00', title: 'üèÅ –ì—Ä–∞–Ω-–ø—Ä–∏ –ê–±—É-–î–∞–±–∏. –ì–æ–Ω–∫–∞ (58 –∫—Ä—É–≥–æ–≤, 306.183 –∫–º)', type: 'race' },
      ]
    }
  ];

    scheduleContainer.innerHTML = '';
    const table = document.createElement('table');
    table.classList.add('race-schedule-table');

    const headerRow = table.insertRow();
    ['–î–∞—Ç–∞', '–°–æ–±—ã—Ç–∏–µ'].forEach(text => {
      const th = document.createElement('th');
      th.textContent = text;
      headerRow.appendChild(th);
    });

    const timeToMinutes = time => {
      const [hour, minute] = time.split(':').map(Number);
      return hour * 60 + minute;
    };

    allSessions.forEach(stage => {
      if (selectedCountries.includes(stage.country)) {
        stage.events.forEach(event => {
          const eventTime = timeToMinutes(event.date.split(' ')[1]); // –ü–æ–ª—É—á–∞–µ–º —Ç–æ–ª—å–∫–æ –≤—Ä–µ–º—è –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –µ–≥–æ
          if (selectedSessionTypes.includes(event.type) && eventTime >= startTime && eventTime <= endTime) {
            const row = table.insertRow();
            row.insertCell().textContent = event.date;
            row.insertCell().textContent = event.title;
          }
        });
      }
    });

    scheduleContainer.appendChild(table);
  }

  function loadSchedule() {
    const savedSchedule = localStorage.getItem('lastRaceSchedule');
    if (savedSchedule) {
      scheduleContainer.innerHTML = savedSchedule;
    } else {
      alert('–ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è.');
    }
  }

  document.getElementById('timeStart').addEventListener('input', updateTimeLabels);
  document.getElementById('timeEnd').addEventListener('input', updateTimeLabels);

  form.addEventListener('submit', function(event) {
    event.preventDefault();
    createSchedule();
  });

  saveParametersButton.addEventListener('click', function() {
    createSchedule();
    saveParameters();
  });
  loadScheduleButton.addEventListener('click', loadSchedule);

  loadParameters();
  updateTimeLabels();
});
